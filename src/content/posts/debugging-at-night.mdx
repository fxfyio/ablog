---
title: 一次深夜排错：问题其实不在代码里
date: 2026-01-29
summary: 排查了很久才发现是环境变量没更新，提醒自己先验证环境，再怀疑实现。
tags:
  - 调试
  - 开发记录
  - 工作流
draft: false
visibility: public
lang: zh
math: false
toc: true
---
昨晚花了将近一小时排一个“看起来像逻辑 bug”的问题，最后发现是旧环境变量还在生效。

当时的错误路径是这样的：

1. 先怀疑最近改动
2. 开始回滚代码
3. 打印更多日志
4. 仍然解释不了现象

后来才检查运行环境，问题立刻暴露。

> 很多“复杂 bug”，其实只是验证顺序不对。

现在我给自己加了一条规则：出现异常时，先确认输入、配置、环境，再深入代码。



![](./debugging-at-night/body/CleanShot%202026-02-24%20at%2014.44.42@2x.png)
